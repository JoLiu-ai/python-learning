# Python 异步编程对象层级

## 1. Awaitable (可等待对象) 
```
Awaitable
├── Coroutine (协程对象)
│   ├── async def 定义的协程
│   └── @types.coroutine 装饰的生成器
├── Future (未来对象)
│   └── Task (任务)
│       ├── asyncio.create_task() 创建
│       └── loop.create_task() 创建
└── 自定义可等待对象
    └── 实现 __await__ 方法的对象
```

## 2. Iterable (可迭代对象)
```
 Iterable
├── 内置容器类型 (实现 __iter__)
│   ├── list, tuple
│   ├── dict, set
│   └── str, bytes
├── 迭代器类型 (Iterator)
│   ├── 必须实现方法
│   │   ├── __iter__  # 返回迭代器自身
│   │   └── __next__  # 返回下一个值或抛出 StopIteration
│   ├── generator (生成器)
│   │   ├── 生成器函数 (def + yield)
│   │   ├── 生成器表达式 (x for x in ...)
│   │   └── 自动实现 __iter__ 和 __next__
│   └── 内置迭代器
│       ├── map, filter  # 惰性求值的迭代器
│       ├── zip, enumerate
│       └── reversed, range
└── 自定义可迭代对象
    ├── 方式1：实现 __iter__ 方法
    │   └── 返回一个迭代器对象
    └── 方式2：实现 __getitem__ 方法
        └── 支持按索引访问
```

## 3. 异步迭代相关
```
├── AsyncIterable (异步可迭代对象)
│   └── 实现 __aiter__ 方法
├── AsyncIterator (异步迭代器)
│   └── 实现 __anext__ 方法
└── AsyncGenerator (异步生成器)
    └── async def + yield 定义
```
## 4. 关键特性对比
```
├── 同步迭代
│   ├── for ... in ...
│   └── next()
├── 异步迭代
│   ├── async for ... in ...
│   └── await anext()
└── 等待操作
    ├── await
    └── yield from (旧式)
```
## 5. 常见使用场景
```
├── 协程
│   ├── 网络 IO 操作
│   └── 异步文件操作
├── Future/Task
│   ├── 并发任务管理
│   └── 异步操作结果占位
└── 迭代器
    ├── 数据流处理
    └── 惰性计算
```
